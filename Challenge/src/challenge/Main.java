package challenge;

import java.io.IOException;
import java.net.URISyntaxException;
import java.sql.Connection;
import java.util.List;


public class Main {
	
	public static void main(String[] args) throws IOException, URISyntaxException {
		Connection conn = DataBaseManager.connect("database.properties");
		DataBaseManager.start(conn);
		
		String attackFile ="./strings.json";
		if(args.length==0){
			System.out.println("Please pass an url");
			return;
		}
		String url = args[0];
		String cookie = "";
		if(args.length>1){
			cookie = args[1];
		}
		List<String> params = AttackManager.attack(url, attackFile, cookie);
		if(params!=null){
			DataBaseManager.addURL(conn, url, params.toArray(new String[params.size()]));
		}
	}
}
