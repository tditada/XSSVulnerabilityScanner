package tests;

import static org.junit.Assert.assertTrue;

import java.io.IOException;
import java.util.LinkedList;
import java.util.List;

import org.junit.Test;

import challenge.Form;
import challenge.ParametersParser;

public class ParameterParseTests {

	/** Testing the parsing with google that have a known input tap.
	 * @throws IOException
	 */
	@Test
	public void checkGooglePageHaveInputs() throws IOException {
		Form f = ParametersParser.parsingForm("http://www.google.com.ar","");
		assertTrue(!f.getParameters().isEmpty());
	}

	/** Testing form parsing, input tag with google page
	 * @throws IOException
	 */
	@Test
	public void checkGooglePageHaveKnownInputName() throws IOException {
		Form f = ParametersParser.parsingForm("http://www.google.com.ar","");
		assertTrue(f.getParameters().contains("q"));
	}
		
	/** Testing form parsing, attribute action with google
	 * @throws IOException
	 */
	@Test
	public void checkGooglePageHaveKnownFormAction() throws IOException {
		Form f = ParametersParser.parsingForm("http://www.google.com.ar","");
		assertTrue(f.getAction().toUpperCase().equals("/SEARCH"));
	}
	
	/** Testing parameters for url form, one parameter
	 * @throws IOException
	 */
	@Test
	public void correctFormUrlOneParameter() throws IOException{
		List<String> params = new LinkedList<String>();
		List<String> values = new LinkedList<String>();
		params.add("parametro1");
		values.add("1");
		Form f =  new Form("", "", params);
		String urlParams = ParametersParser.getUrlParams(f,values);
		assertTrue(urlParams.equals("parametro1=1"));
		
	}
	
	
	/** Testing parameters for url form, three parameters
	 * @throws IOException
	 */
	@Test
	public void correctFormUrlThreeParameter() throws IOException{
		List<String> params = new LinkedList<String>();
		List<String> values = new LinkedList<String>();
		params.add("parametro1");
		params.add("parametro2");
		params.add("parametro3");
		values.add("1");
		values.add("2");
		values.add("3");
		Form f =  new Form("", "", params);
		String urlParams = ParametersParser.getUrlParams(f,values);
		assertTrue(urlParams.equals("parametro1=1&parametro2=2&parametro3=3"));
		
	}
	
}
